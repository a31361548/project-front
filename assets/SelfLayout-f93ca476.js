import{T as b,U as h,a3 as k,o as g,a5 as w,W as l,a6 as p,c as t,Y as s,M as m,Z as i,a8 as y,X as C,a7 as B,a2 as L}from"./index-4712e515.js";import{V as A,a as N}from"./VNavigationDrawer-6b744b8a.js";import{a as d,V as c}from"./VList-6d490b48.js";import{V as R}from"./VDivider-808ddadf.js";import"./ssrBoot-291bb583.js";const E={__name:"SelfLayout",setup(S){const f=b(),u=h(),{apiAuth:v}=L(),o=k(),_=[{to:"/self/article",text:"文章管理",icon:"mdi-list-box"},{to:"/self/favorite",text:"收藏",icon:"mdi-heart"},{to:"/",text:"回首頁",icon:"mdi-home"}],x=g(()=>o.avatar),V=async()=>{var n,r;try{await v.delete("/users/logout"),o.logout(),u({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),f.push("/")}catch(a){const e=((r=(n=a==null?void 0:a.response)==null?void 0:n.data)==null?void 0:r.message)||"發生錯誤，請稍後再試";u({text:e,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(n,r)=>{const a=w("RouterView");return l(),p(m,null,[t(A,{"expand-on-hover":"",rail:"","mobile-breakpoint":"xs"},{default:s(()=>[t(d,null,{default:s(()=>[t(c,{"prepend-avatar":x.value,title:i(o).account,subtitle:i(o).email,to:"/self"},null,8,["prepend-avatar","title","subtitle"])]),_:1}),t(R),t(d,{density:"compact",nav:""},{default:s(()=>[(l(),p(m,null,y(_,e=>t(c,{key:e.to,to:e.to,title:e.text,"prepend-icon":e.icon,value:e.to},null,8,["to","title","prepend-icon","value"])),64)),i(o).isLogin?(l(),C(c,{key:0,title:"登出","prepend-icon":"mdi-logout",onClick:V})):B("",!0)]),_:1})]),_:1}),t(N,null,{default:s(()=>[t(a)]),_:1})],64)}}};export{E as default};
