import{T as U,U as $,x as b,W as q,X as F,Y as l,a2 as P,c as s,Z as a,$ as T,a0 as n,J as N,a1 as E,ax as I}from"./index-4712e515.js";import{v as w}from"./index-ee6bba0e.js";import{u as R,a as t}from"./vee-validate.esm-d7e2001b.js";import{c as W,a as i,b as z}from"./index.esm-639fe0e0.js";import{a as A,V as x}from"./VCol-37fbc867.js";import{V as D}from"./VDivider-808ddadf.js";import{V as J}from"./VForm-894b783c.js";const O=I("h1",null,"註冊",-1),L={__name:"RegisterView",setup(X){const h=U(),g=$(),{api:y}=P(),u=b(!1),m=b(!1),C=W({account:i().required("帳號為必填欄位").min(4,"使用者帳號長度不符").max(20,"使用者帳號長度不符"),email:i().required("信箱為必填欄位").test("isEmail","信箱格式錯誤",r=>w.isEmail(r)),phone:i().required("手機號碼必填").test("isMobilePhone","格式錯誤",r=>w.isMobilePhone(r,"zh-TW")),password:i().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符"),passwordConfirm:i().required("密碼為必填欄位").min(4,"密碼長度不符").max(20,"密碼長度不符").oneOf([z("password")],"密碼不一致")}),{handleSubmit:k,isSubmitting:M}=R({validationSchema:C}),p=t("account"),c=t("email"),v=t("phone"),f=t("password"),V=t("passwordConfirm"),B=k(async r=>{var e,o;try{await y.post("/users",{account:r.account,email:r.email,password:r.password,phone:r.phone}),g({text:"註冊成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}}),h.push("/login")}catch(d){console.log(d);const S=((o=(e=d==null?void 0:d.response)==null?void 0:e.data)==null?void 0:o.message)||"發生錯誤，請稍後再試";g({text:S,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}});return(r,e)=>(q(),F(A,null,{default:l(()=>[s(x,{cols:"12"},{default:l(()=>[O,s(D)]),_:1}),s(x,{cols:"12"},{default:l(()=>[s(J,{disabled:a(M),onSubmit:T(a(B),["prevent"])},{default:l(()=>[s(n,{label:"帳號",minlength:"4",maxlength:"20",counter:"","prepend-inner-icon":"mdi-account",modelValue:a(p).value.value,"onUpdate:modelValue":e[0]||(e[0]=o=>a(p).value.value=o),"error-messages":a(p).errorMessage.value},null,8,["modelValue","error-messages"]),s(n,{label:"信箱",type:"email","prepend-inner-icon":"mdi-email",modelValue:a(c).value.value,"onUpdate:modelValue":e[1]||(e[1]=o=>a(c).value.value=o),"error-messages":a(c).errorMessage.value},null,8,["modelValue","error-messages"]),s(n,{label:"手機號碼","prepend-inner-icon":"mdi-phone",modelValue:a(v).value.value,"onUpdate:modelValue":e[2]||(e[2]=o=>a(v).value.value=o),"error-messages":a(v).errorMessage.value},null,8,["modelValue","error-messages"]),s(n,{label:"密碼",type:m.value?"text":"password","prepend-inner-icon":"mdi-lock",minlength:"4",maxlength:"20",counter:"",modelValue:a(f).value.value,"onUpdate:modelValue":e[3]||(e[3]=o=>a(f).value.value=o),"append-inner-icon":m.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":e[4]||(e[4]=o=>m.value=!m.value),"error-messages":a(f).errorMessage.value},null,8,["type","modelValue","append-inner-icon","error-messages"]),s(n,{label:"確認密碼",type:u.value?"text":"password","prepend-inner-icon":"mdi-check",minlength:"4",maxlength:"20",counter:"",modelValue:a(V).value.value,"onUpdate:modelValue":e[5]||(e[5]=o=>a(V).value.value=o),"append-icon-inner":u.value?"mdi-eye":"mdi-eye-off","onClick:appendInner":e[6]||(e[6]=o=>u.value=!u.value),"error-messages":a(V).errorMessage.value},null,8,["type","modelValue","append-icon-inner","error-messages"]),s(N,{type:"submit",color:"blue"},{default:l(()=>[E("註冊")]),_:1})]),_:1},8,["disabled","onSubmit"])]),_:1})]),_:1}))}};export{L as default};
